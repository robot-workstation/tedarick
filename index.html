<!doctype html>
<html lang="tr">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Compel ⇄ Products Eşleştirici</title>
  <style>
    body{font-family:system-ui,Segoe UI,Roboto,Arial;margin:14px}
    .row{display:flex;gap:10px;flex-wrap:wrap;align-items:end}
    .box{border:1px solid #ddd;border-radius:10px;padding:10px;margin:10px 0}
    label{display:grid;gap:6px;font-size:13px}
    button{padding:7px 10px;cursor:pointer}
    table{width:100%;border-collapse:collapse;margin-top:8px;font-size:13px}
    th,td{border:1px solid #eee;padding:7px;vertical-align:top}
    th{background:#fafafa;text-align:left}
    small{color:#666}
    input[type=file]{width:320px}
    input[type=text]{width:180px}
    code{background:#f6f6f6;padding:1px 6px;border-radius:6px}
  </style>
</head>
<body>
  <h3>CSV Eşleştirici (EAN→Barkod) + Manuel→JSON</h3>

  <div class="box row">
    <label>1) compel-sonuc.csv<input id="f1" type="file" accept=".csv,text/csv"></label>
    <label>2) products.csv<input id="f2" type="file" accept=".csv,text/csv"></label>
    <label>3) mapping.json (opsiyonel)<input id="f3" type="file" accept=".json,application/json"></label>
    <button id="go">Generate</button>
    <button id="reset" title="Her şeyi sıfırla">Temizle</button>
  </div>

  <div class="box" id="st"><small>Hazır.</small></div>

  <div class="box row">
    <button id="dl1" disabled>Sonuç CSV indir</button>
    <button id="dl2" disabled>Eşleşmeyenler CSV indir</button>
    <button id="dl3" disabled>Güncel JSON indir</button>
    <small>Alias: <b>Allen &amp; Heath → Allen Heath</b> • products stok “-” = stok yok</small>
  </div>

  <div class="box">
    <b>Sonuçlar</b> <small id="sum"></small>
    <div style="overflow:auto"><table id="t1"></table></div>
  </div>

  <div class="box">
    <b>Eşleşmeyenler (Manuel)</b><br>
    <small>Web Servis Kodu veya Tedarikçi Ürün Kodu gir → Eşleştir + JSON’a Kaydet</small>
    <div style="overflow:auto"><table id="t2"></table></div>
  </div>

  <datalist id="wsCodes"></datalist>
  <datalist id="supCodes"></datalist>

  <script type="module" src="./js/app.js"></script>
</body>
</html>
